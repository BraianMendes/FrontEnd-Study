<!DOCTYPE html>
<html>

	<head>
		<title></title>
	</head>

	<body>
		<button onclick="adicionaQuadrado()">Adicionar</button>

		<div id="container"></div>

	</body>

	<script type="text/javascript">
		function adicionaQuadrado () {
			var quadrado = document.createElement('div');
			quadrado.setAttribute('style', 'width: 100px; height: 100px; background-color: red');
			quadrado.setAttribute('onmouseenter', 'changeColor(id)');

			function guidGenerator() {
			    var S4 = function() {
			       return (((1+Math.random())*0x10000)|0).toString(16).substring(1);
			    };
			    return (S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4());
			}

			var newId = guidGenerator();

			console.log(newId);

			quadrado.setAttribute('id', newId);

			var containerElement = document.querySelector('#container');
			containerElement.appendChild(quadrado);
		};

		function changeColor(id){

			function getRandomColor() {

			 var letters = "0123456789ABCDEF";
			 var color = "#";
			 for (var i = 0; i < 6; i++) {
			 color += letters[Math.floor(Math.random() * 16)];
			 }
			 return color;
			}
			var newColor = getRandomColor(); // #E943F0

			var quadradoElement = document.getElementById(id);
			quadradoElement.style.background = newColor;


		}

	</script>

</html>